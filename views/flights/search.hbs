
<main class="fullHeight">
                <!----------- LOCATION CAROUSEL ------------>
    <div id="locationCarousel" class="carousel slide carousel-fade" data-bs-ride="carousel">
        <div class="carousel-indicators">
            {{#each (array 0 1 2 3 4 5)}}
                <button type="button" data-bs-target="#locationCarousel" data-bs-slide-to="{{this}}" class="{{#if @first}}active{{/if}}" aria-label="Slide {{inc @index}}"></button>
            {{/each}}  
        </div>
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="/assets/cities/Vietnam.png" class="d-block w-100" alt="vietnam.png">
            </div>
            <div class="carousel-item">
                <img src="/assets/cities/hongkong.png" class="d-block w-100" alt="hongkong.png">
            </div>
            <div class="carousel-item">
                <img src="/assets/cities/singapore.png" class="d-block w-100" alt="singapore.png">
            </div>
            <div class="carousel-item">
                <img src="/assets/cities/thailand.png" class="d-block w-100" alt="thailand.png">
            </div>
            <div class="carousel-item">
                <img src="/assets/cities/tokyo.png" class="d-block w-100" alt="tokyo.png">
            </div>
            <div class="carousel-item">
                <img src="/assets/cities/Boracay.png" class="d-block w-100" alt="boracay.png">
            </div>
        </div>
    </div>

        <!----------- FLIGHT SEARCH ------------>
    <div id="search">
        <div class="flightSearch">
            <form id="flightSearch" class="needs-validation" method="get" action="/flights/search" novalidate>
                <div class="row g-3">

                    <!----------- Trip selection dropdown ------------>
                    <div class="col-md-6">
                        <div class="dropdown" id="tripDropdown">
                            <button class="btn btn-outline-danger dropdown-toggle w-100 text-start" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                Select Trip Type
                            </button>

                            <ul class="dropdown-menu">
                                <li><button class="dropdown-item" type="button">One-Way</button></li>
                                <li><button class="dropdown-item" type="button">Round-Trip</button></li>
                            </ul>
                        </div>
                        <!-- hidden input for validation -->
                        <input type="hidden" id="tripTypeInput" name="tripType" required>
                        <div class="invalid-feedback">Please select a trip type.</div>
                        
                        <!-- <select class="form-select border-danger text-danger" id="tripType" name="tripType" required>
                            <option value="" disabled selected class="text-danger">Select Trip Type</option>
                            <option value="oneway" class="text-danger">One Way</option>
                            <option value="roundtrip" class="text-danger">Round Trip</option>
                            <option value="multicity" class="text-danger">Multi-City</option>
                        </select> -->
                    </div>

                    <!----------- Passenger count and Cabin selection Dropdown ------------>
                    <div class="col-md-6">
                        <div class="dropdown" id="passengerDropdown" data-bs-auto-close="outside">
                            <button class="btn btn-outline-danger dropdown-toggle w-100 text-start" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                1 Passenger, All Cabins
                            </button>

                            <div class="dropdown-menu p-3 w-100">
                                <!-- Travel Class -->
                                <div class="mb-3">
                                    <label for="travelClass" class="form-label mb-1">Travel Class</label>
                                    <select id="travelClass" name="travelClass" class="form-select">
                                        <option value="All">All Cabins</option>
                                        <option value="Economy">Economy</option>
                                        <option value="Premium Economy">Premium Economy</option>
                                        <option value="Business">Business</option>
                                        <option value="First">First</option>
                                    </select>
                                </div>
                                <hr class="dropdown-divider">
                                <!-- Passengers -->
                                <div>
                                    <h6 class="mb-2">Passengers</h6>
                                    <div class="d-flex justify-content-between align-items-center mb-2 counter">
                                        <span>Adult</span>
                                        <div>
                                            <button class="btn btn-sm btn-secondary minus">−</button>
                                            <span class="value mx-2">1</span>
                                            <button class="btn btn-sm btn-secondary plus">+</button>
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-between align-items-center mb-2 counter">
                                        <span>Child (2y - 11y)</span>
                                        <div>
                                            <button class="btn btn-sm btn-secondary minus">−</button>
                                            <span class="value mx-2">0</span>
                                            <button class="btn btn-sm btn-secondary plus">+</button>
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-between align-items-center mb-2 counter">
                                        <span>Infant (16d - 23m)</span>
                                        <div>
                                            <button class="btn btn-sm btn-secondary minus">−</button>
                                            <span class="value mx-2">0</span>
                                            <button class="btn btn-sm btn-secondary plus">+</button>
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-between align-items-center mb-2 counter">
                                        <span>Student</span>
                                        <div>
                                            <button class="btn btn-sm btn-secondary minus">−</button>
                                            <span class="value mx-2">0</span>
                                            <button class="btn btn-sm btn-secondary plus">+</button>
                                        </div>
                                    </div>
                                </div> 
                            </div>
                        </div>
                        <!-- hidden input for validation -->
                        <input type="hidden" id="passengers" name="passengers" required>
                    </div>

                    <!----------- Origin Selection Dropdown ------------>
                    <div class="col">
                        <div class="dropdown" id="originDropdown" data-bs-auto-close="outside">
                            <button class="btn btn-outline-danger dropdown-toggle w-100 text-start" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                Select Origin
                            </button>
                            
                            <div class="dropdown-menu p-0">
                                <div class="row g-0">
                                <!-- Left Column: Countries -->
                                <div class="col-4 menu-left bg-light">
                                    <ul class="list-unstyled mb-0" id="countries">
                                        {{> countries}}
                                    </ul>
                                </div>
                            
                                <!-- Right Column: Cities -->
                                <div class="col-8 menu-right p-3" id="cities">
                                    <!-- Default shown (Philippines) -->
                                    {{> cities}}
                                </div>
                                </div>
                            </div>

                            <!-- Hidden Input for validation-->
                            <input type="hidden" id="originInput" name="origin" required>
                            <div class="invalid-feedback">Please select an origin.</div>
                        </div>
                    </div>

                    <!----------- Destination Selection Dropdown ------------>
                    <div class="col">
                        <div class="dropdown" id="destinationDropdown" data-bs-auto-close="outside">
                            <button class="btn btn-outline-danger dropdown-toggle w-100 text-start" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                Select Detination
                            </button>
                            
                            <div class="dropdown-menu p-0">
                                <div class="row g-0">
                                <!-- Left Column: Countries -->
                                <div class="col-4 menu-left bg-light">
                                    <ul class="list-unstyled mb-0" id="countryList">
                                        {{> countries}}
                                    </ul>   
                                </div>
                            
                                <!-- Right Column: Cities -->
                                <div class="col-8 menu-right p-3" id="cityList">
                                    <!-- Default shown (Philippines) -->
                                    {{> cities}}
                                </div>
                                </div>
                            </div>
                        </div>

                        <!-- Hidden Input for validation-->
                        <input type="hidden" id="destinationInput" name="destination" required>
                        <div class="invalid-feedback">Please select a destination.</div>
                    </div>

                    <!----------- Departure and Return Date Fields ------------>
                    <div class="col">
                        <input type="text" class="form-control border-danger" id="departureDate" name="departureDate" required placeholder="Select Departure Date">
                        <div class="invalid-feedback">Please select departure date.</div>
                    </div>
                    <div class="col">
                        <input type="text" class="form-control border-danger" id="returnDate" name="returnDate" placeholder="Select Return Date" required>
                        <div class="invalid-feedback">Please select return date.</div>
                    </div>

                    <!----------- Search Flight Button ------------>
                    <div class="col-12 d-grid">
                        <button type="submit" class="btn btn-danger">Search Flights</button>
                    </div>
                    
                </div>
            </form>
        </div>
        <br><br><br>
    </div>

    <!--
    <!-- placeholder for AJAX results --
    <div id="searchResultsContainer" class="mt-5"></div>
    <hr class="mb-4">
    -->

    <div class="my-5 text-center">
        <h3>Popular Destinations</h3>
        <p>Explore our most popular flight destinations around the world.</p>
    </div>
    
    <!---------- POPULAR DESTINATION CAROUSEL ---------->
    <div id="popularDestCarousel" class="carousel slide mx-auto w-md-75 w-lg-50" data-bs-ride="carousel">
        <div class="carousel-indicators">
            {{#each (range 0 (divide popularFlights.length 4))}}
                <button type="button" data-bs-target="#popularDestCarousel" data-bs-slide-to="{{@index}}" class="{{#if @first}}active{{/if}}" aria-label="Slide {{inc @index}}"></button>
            {{/each}}
        </div>
        <div class="carousel-inner">
            {{#each (chunk popularFlights 4)}}  {{!-- 4 flights per slide --}}
                <div class="carousel-item {{#if @first}}active{{/if}}">
                    <div class="row g-2">
                        {{#each this}}
                            <div class="col-md-3">
                                <div class="card d-flex flex-column h-100">
                                    <img src="{{this.image}}" class="card-img-top" alt="{{this.flight.destination}}">
                                    <div class="card-body d-flex flex-column">
                                        <h5 class="card-title">{{this.flight.origin}} → {{this.flight.destination}}</h5>
                                        <p class="card-subtitle mb-2 text-body-secondary">{{formatDate this.startDate}} - {{formatDate this.endDate}}</p>
                                        <p class="card-text mb-1">From</p>
                                        <h3 class="card-text mb-1">USD {{this.flight.price}}*</h3>
                                        <p class="card-text mb-0">{{this.tripType}}/{{this.travelClass}}</p>
                                        <p class="card-text">Depart: {{this.flight.departureDate}}</p>
                                        <div class="mt-auto">
                                            <a href="/reservations/book/{{this.flight._id}}" class="btn btn-danger d-grid gap-2">Book Now</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {{/each}}
                    </div>
                </div>
            {{/each}}

        </div>
        {{#unless popularFlights.length}}
            <p class="text-center text-muted">No popular flights found.</p>
        {{/unless}}
        <!---------- Carousel Controls ---------->
        <div class="carousel-controls">
            <button class="carousel-control-prev" type="button" data-bs-target="#popularDestCarousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true "></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#popularDestCarousel" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
    </div>

    <br>
    <div id="notice">*Fares displayed have been collected within the last 48hrs and may no longer be available at time of booking. Quoted fares includes taxes, fees, and surcharges except PH Travel Tax which is added at the passenger's option during or after the booking.</div>
    <br>
    <hr>


    <div id="benefits">
        <div class="my-5 text-center">
            <h3>Why Fly with Archers Airline?</h3>
            <p>Experience the best in comfort, service, and value when you fly with us.</p>
        </div>

        <div class="container">
            <div class="row text-center">
                <div class="col-md-4 mb-4">
                    <h5>Best Price Guarantee</h5>
                    <p>We offer competitive prices and the best deals on flights.</p>
                </div>
                <div class="col-md-4 mb-4">
                    <h5>24/7 Customer Support</h5>
                    <p>Our support team is available around the clock to assist you.</p>
                </div>
                <div class="col-md-4 mb-4">
                    <h5>Extensive Network</h5>
                    <p>Fly to over 100 destinations worldwide with our extensive route network.</p>
                </div>
            </div>
        </div>
    </div>

    <hr class="divider">


    <div class="my-5 text-center">
        <h3>Ready to Book Your Flight?</h3>
        <p>Start your journey with Archers Airline today!</p>
        <a href="#"><button class="btn btn-danger btn-lg">Book Now</button></a>
    </div>
    
</main>
